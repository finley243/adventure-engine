<data>
    <action id="lock_pick">
        <prompt>Pick lock</prompt>
        <condition>
            <condition type="boolean">
                <var type="stat" dataType="boolean" stat="locked" holder="parentObject"/>
            </condition>
            <condition type="compare" equality="GREATER_EQUAL">
                <var type="stat" dataType="int" stat="lockpick" holder="subject"/>
                <var type="stat" dataType="int" stat="lock_pick_difficulty" holder="parentObject"/>
            </condition>
        </condition>
        <script>
            <script type="setState" state="locked" holder="parentObject">
                <var dataType="boolean" value="false"/>
            </script>
            <script type="sensoryEvent">
                <phrase>pickLock</phrase>
                <area type="stat" dataType="string" holder="subject" subType="area" stat="id"/>
            </script>
        </script>
    </action>
    <action id="lock_key">
        <prompt>Unlock</prompt>
        <condition>
            <condition type="boolean">
                <var type="stat" dataType="boolean" stat="locked" holder="parentObject"/>
            </condition>
            <condition type="inventoryItem" requireAll="false">
                <inv type="stat" dataType="inventory" holder="subject"/>
                <item type="stat" dataType="stringSet" stat="lock_keys" holder="parentObject"/>
            </condition>
        </condition>
        <script>
            <script type="setState" state="locked" holder="parentObject">
                <var dataType="boolean" value="false"/>
            </script>
            <script type="sensoryEvent">
                <phrase>unlock</phrase>
                <area type="stat" dataType="string" holder="subject" subType="area" stat="id"/>
            </script>
        </script>
    </action>
    <action id="vending_machine">
        <prompt>Buy $itemName ($price)</prompt>
        <parameter name="itemName" dataType="string" type="stat" holder="itemTemplate" stat="name">
            <holderID type="parameter" name="itemID"/>
        </parameter>
        <parameter name="price" dataType="string" type="toString">
            <var type="stat" dataType="int" holder="itemTemplate" stat="price">
                <holderID type="parameter" name="itemID"/>
            </var>
        </parameter>
        <condition type="compare" equality="GREATER_EQUAL">
            <var type="stat" dataType="int" stat="money" holder="subject"/>
            <var type="stat" dataType="int" holder="itemTemplate" stat="price">
                <holderID type="parameter" name="itemID"/>
            </var>
        </condition>
        <script>
            <script type="addItem">
                <inv type="stat" dataType="inventory" holder="subject"/>
                <item type="parameter" dataType="string" name="itemID"/>
            </script>
            <script type="modifyState" dataType="int" state="money" holder="subject">
                <var dataType="int" value="-10"/>
                <var type="product" dataType="int">
                    <var type="stat" dataType="int" holder="itemTemplate" stat="price">
                        <holderID type="parameter" name="itemID"/>
                    </var>
                    <var dataType="int" value="-1"/>
                </var>
            </script>
            <script type="sensoryEvent">
                <parameter name="item" type="stat" dataType="noun" holder="itemTemplate">
                    <holderID type="parameter" name="itemID"/>
                </parameter>
                <phrase>vendingMachineBuy</phrase>
                <area type="stat" dataType="string" holder="subject" subType="area" stat="id"/>
            </script>
        </script>
    </action>
</data>